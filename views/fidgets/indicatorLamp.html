<!--
 * Software License Agreement (Apache License)
 *
 * Copyright (c) 2016, PPM AS
 * Contact: laszlo.nagy@ppmas.no
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License. 
 -->

<div style="width: {{fidget.properties.width}}px; height: {{fidget.properties.height}}px;" 
     ng-init="initIndicatorLamp(fidget)"
     class="indicatorLamp" 
     hm-tapend="onClick(fidget, fidget.properties.onClick)" 
     ng-mouseup="onClick(fidget, fidget.properties.onClick)">
    <style>
        #{{fidget.id}} .lamp{
                           border-width: {{size * 0.075}}px;
                       }

        #{{fidget.id}} .on{
                           background-color: {{fidget.properties.onColor}};
                       }

        #{{fidget.id}} .off{
                           background-color: {{fidget.properties.offColor}};
                       }
    </style>
    
    <style ng-if="fidget.properties.blinking == true">
        #{{fidget.id}} .blink_me {
            -webkit-animation-name: blinker;
            -webkit-animation-duration: {{fidget.properties.blinkPeriod}}s;
            -webkit-animation-timing-function: linear;
            -webkit-animation-iteration-count: infinite;
        }

        @-webkit-keyframes blinker {  
            0% { opacity: {{fidget.properties.blinkPeriod}}; }
            50% { opacity: 0.0; }
            100% { opacity: {{fidget.properties.blinkPeriod}}; }
        }
    </style>

    <div style="height: {{size}}px; width: {{size}}px; float: left;">
        <div class="lamp">
            <div class="on blink_me bulb" ng-if="[true, 1, 'true', '1'].indexOf(fidget.properties.value) != -1"></div>
            <div class="off blink_me bulb" ng-if="[false, 0, 'false', '0'].indexOf(fidget.properties.value) != -1"></div>
        </div>
    </div>
    <div style="height: {{size}}px; line-height: {{size}}px; padding-left: {{size + 5}}px; color: {{fidget.properties.fontColor}} ">
        {{fidget.properties.text}}
    </div>
</div>
